<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hvillage運動会 参加競技検索</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .subtitle {
            font-size: 1.1em;
            color: #7f8c8d;
            margin-bottom: 20px;
        }
        
        .search-section {
            background-color: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        input[type="text"] {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input[type="text"]:focus {
            outline: none;
            border-color: #3498db;
        }
        
        button {
            padding: 12px 25px;
            background-color: #2c3e50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #34495e;
        }
        
        .results {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .no-results {
            padding: 40px;
            text-align: center;
            color: #7f8c8d;
            font-size: 1.1em;
        }
        
        .participant-info {
            padding: 25px;
            border-bottom: 1px solid #eee;
        }
        
        .participant-name {
            font-size: 1.8em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 20px;
        }
        
        .competition {
            margin-bottom: 25px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }
        
        .competition-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .team-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 15px;
        }
        
        .team {
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        
        .team-basil-turmeric {
            background-color: #e8f5e8;
            border-color: #4caf50;
        }
        
        .team-paprika-rosemary {
            background-color: #fff3e0;
            border-color: #ff9800;
        }
        
        .team-name {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .team-members {
            font-size: 0.95em;
            line-height: 1.4;
        }
        
        .member {
            margin-bottom: 3px;
        }
        
        .current-member {
            font-weight: bold;
            color: #e74c3c;
        }

        .matched-member {
            background-color: #fff3cd;
            padding: 2px 4px;
            border-radius: 3px;
            border: 1px solid #ffeaa7;
        }
          /* 10秒後のグリッチ黒背景画面用 */
    #glitch-screen {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: #000;
      color: #0f0;
      font-family: monospace, monospace;
      font-size: 12px;
      white-space: pre-wrap;
      overflow-y: auto;
      padding: 10px;
      display: none;
      user-select: none;
      animation: vibrate 0.15s infinite;
      z-index: 9999;
    }

        /* 爆発エフェクト用スタイル */
        #jiro-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10000;
            display: none;
        }

        #jiro-title {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4em;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 3px 3px 0px #000, -1px -1px 0px #000, 1px -1px 0px #000, -1px 1px 0px #000;
            animation: explode 2s ease-out;
            pointer-events: none;
        }

        @keyframes explode {
            0% {
                transform: translate(-50%, -50%) scale(0) rotate(0deg);
                opacity: 0;
                text-shadow: 0 0 50px #ffd700, 0 0 100px #ffd700, 0 0 150px #ffd700;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.5) rotate(5deg);
                opacity: 1;
                text-shadow: 0 0 30px #ffd700, 0 0 60px #ffd700, 0 0 90px #ffd700, 3px 3px 0px #000, -1px -1px 0px #000, 1px -1px 0px #000, -1px 1px 0px #000;
            }
            100% {
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
                opacity: 1;
                text-shadow: 3px 3px 0px #000, -1px -1px 0px #000, 1px -1px 0px #000, -1px 1px 0px #000;
            }
        }

        .jiro-image {
            position: absolute;
            width: 100px;
            height: 150px;
            cursor: pointer;
            transition: transform 0.1s;
        }

        .jiro-image:hover {
            transform: scale(1.1);
        }

        .jiro-image:active {
            transform: scale(0.9);
        }

        .tap-effect {
            animation: tapPulse 0.3s ease-out;
        }

        @keyframes tapPulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1);
            }
        }

        #tap-counter {
            display: none;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            header div {
                flex-direction: column !important;
                gap: 10px !important;
            }
            
            header img {
                height: 50px !important;
            }
            
            .team-info {
                grid-template-columns: 1fr;
            }
            
            .search-box {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div style="display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 10px;">
                <img src="https://raw.githubusercontent.com/Rhizobium-gits/HSports/main/H-Logo.png" alt="Hvillage Logo" style="height: 60px; width: auto;">
                <h1>Sports Festival 2025</h1>
            </div>
            <p class="subtitle">参加競技・チーム検索システム</p>
            <p style="font-size: 0.9em; color: #95a5a6;">名前を入力して参加競技とチームメンバーを確認しよう！</p>
        </header>
        
        <div class="search-section">
            <div class="search-box">
                <input type="text" id="nameInput" placeholder="名前を入力してください"/>
                <button onclick="searchParticipant()">検索</button>
            </div>
        </div>
        
        <div class="results" id="results">
            <div class="no-results">
                名前（または名前の一部）を入力して検索ボタンを押してください<br><br>
                例：<br>
                ・フルネーム：飯田太郎<br>
                ・苗字のみ：飯田<br>
                ・名前のみ：太郎
            </div>
        </div>
    </div>

    <!-- 二郎さん用オーバーレイ -->
    <div id="jiro-overlay">
        <div id="jiro-title">Super Jiro Time!!</div>
    </div>

    <script>
        // CSVデータをJavaScriptオブジェクトに変換
        const sportsData = {
            'フットサル（第一試合Bコート）': {
                'バジル・ターメリック': ['早川泰史', '清水佑人', '海老川舜悟', 'Nguyen Tran Quang Minh', 'Naradama Acchedyaswastha', '田中愛奈'],
                'パプリカ・ローズマリー': ['堀井幸太郎', '國本涼太', '矢野周誠', 'Arata Ito', '関祐樹']
            },
            'フットサル（第二試合Bコート）': {
                'バジル・ターメリック': ['大島元', '河井凜仁', '丹琢真', '阿部朋樹', '小川胤人', '竹枝里紗'],
                'パプリカ・ローズマリー': ['Namihiro Tanabe', '鵜野環', '柳本双壽', 'Naoki Alforte', '中村直承', '森本光雅']
            },
            'バレーボール（第一試合Aコート）': {
                'バジル・ターメリック': ['絹谷健斗', '伊藤優太', 'Cho Hansung', '岸上アレキサンダー海斗', 'Mughni', 'Gabrielle Angelie Limcuando', '小園愛凛'],
                'パプリカ・ローズマリー': ['木村龍生', '堀安泰世', 'Pablo Tinoco Perez', '鵜野環', '中村直承', 'Lee SiHeon', '本村意識']
            },
            'バレーボール（第二試合Aコート）': {
                'バジル・ターメリック': ['佐藤翼', '野中智貴', '石川光歩', 'Takato Shiiba', '羅雅凡', '前野はづき', '塚原れとな'],
                'パプリカ・ローズマリー': ['矢野周誠', '橋本和樹', '村田亮', '堀井幸太郎', '中島礼子', '箱嶋萌衣', '中居栞愛']
            },
            'バスケ（第一試合Aコート）': {
                'バジル・ターメリック': ['早川泰史', '清水佑人', 'Cho Hansung', '三谷莉麻', 'Gabrielle Angelie Limcuando', '塚原れとな'],
                'パプリカ・ローズマリー': ['中村直承', '柳本双壽', 'Namihiro Tanabe', 'Lee SiHeon', '成瀬凛帆', '中島礼子']
            },
            'バスケ（第一試合Bコート）': {
                'バジル・ターメリック': ['海老川舜悟', 'Nguyen Tran Quang Minh', '伊藤優太', '阿部朋樹', '竹枝里紗', '廣鰭優華'],
                'パプリカ・ローズマリー': ['矢野周誠', 'Arata Ito', '木村龍生', '鵜野環', '泉美乃', '本村意識']
            },
            'バスケ（第二試合Aコート）': {
                'バジル・ターメリック': ['岡野純大', '丹琢真', '松林篤史', '絹谷健斗', '根来夏美', '須山ひまり'],
                'パプリカ・ローズマリー': ['香取星天', 'Anuka Jay', '橋本和樹', '村田亮', '箱嶋萌衣', '中居栞愛']
            },
            'リレー（1組目）': {
                'バジル・ターメリック': ['早川泰史', '大森宣裕', '岸上アレキサンダー海斗', '宮崎晃太', '重藤絵音愛', '山本ののか'],
                'パプリカ・ローズマリー': ['柳本双壽', 'Pablo Tinoco Perez', '村田亮', 'Naoki Alforte', 'Luna Ho', '泉美乃']
            },
            'リレー（2組目）': {
                'バジル・ターメリック': ['小野遼太', '海老川舜悟', 'Nguyen Tran Quang Minh', '阿部朋樹', '塚原れとな', '横山莉凛'],
                'パプリカ・ローズマリー': ['柏原悠人', '矢野周誠', '堀安泰世', '矢野周誠', '中村花', '中居栞愛']
            }
        };

        function searchParticipant() {
            const searchQuery = document.getElementById('nameInput').value.trim();
            const resultsDiv = document.getElementById('results');
            
            // 北崎二郎の特別処理
            if (searchQuery === '北崎二郎') {
                activateJiroMode();
                return;
            }
            
            if (!searchQuery) {
                resultsDiv.innerHTML = '<div class="no-results">名前を入力してください</div>';
                return;
            }
            
            const matchedMembers = [];
            
            // 全ての競技とチームを検索して部分マッチを探す
            for (const [competition, teams] of Object.entries(sportsData)) {
                for (const [teamName, members] of Object.entries(teams)) {
                    for (const member of members) {
                        // 部分マッチの判定（大文字小文字、スペースを無視）
                        const normalizedMember = member.toLowerCase().replace(/\s+/g, '');
                        const normalizedQuery = searchQuery.toLowerCase().replace(/\s+/g, '');
                        
                        if (normalizedMember.includes(normalizedQuery)) {
                            // 既に同じメンバーが見つかっているかチェック
                            let existingMember = matchedMembers.find(m => m.name === member);
                            
                            if (existingMember) {
                                // 既存のメンバーに競技を追加
                                existingMember.participations.push({
                                    competition: competition,
                                    team: teamName,
                                    teammates: members.filter(m => m !== member),
                                    allMembers: members
                                });
                            } else {
                                // 新しいメンバーを追加
                                matchedMembers.push({
                                    name: member,
                                    participations: [{
                                        competition: competition,
                                        team: teamName,
                                        teammates: members.filter(m => m !== member),
                                        allMembers: members
                                    }]
                                });
                            }
                        }
                    }
                }
            }
            
            if (matchedMembers.length === 0) {
                resultsDiv.innerHTML = `
                    <div class="no-results">
                        「${searchQuery}」に一致する参加者が見つかりませんでした。<br>
                        名前のスペルを確認してください。
                    </div>
                `;
                return;
            }
            
            // 結果を表示
            let html = '';
            
            matchedMembers.forEach(memberData => {
                html += `
                    <div class="participant-info">
                        <div class="participant-name">📋 ${memberData.name} さんの参加競技</div>
                `;
                
                memberData.participations.forEach(participation => {
                    const otherTeam = participation.team === 'バジル・ターメリック' ? 'パプリカ・ローズマリー' : 'バジル・ターメリック';
                    const otherTeamMembers = sportsData[participation.competition][otherTeam] || [];
                    
                    html += `
                        <div class="competition">
                            <div class="competition-title">🏆 ${participation.competition}</div>
                            <div class="team-info">
                                <div class="team ${participation.team === 'バジル・ターメリック' ? 'team-basil-turmeric' : 'team-paprika-rosemary'}">
                                    <div class="team-name">🟢 ${participation.team}（このメンバーのチーム）</div>
                                    <div class="team-members">
                                        ${participation.allMembers.map(member => {
                                            const isCurrentMember = member === memberData.name;
                                            const isMatched = member.toLowerCase().replace(/\s+/g, '').includes(searchQuery.toLowerCase().replace(/\s+/g, ''));
                                            let className = 'member';
                                            if (isCurrentMember) className += ' current-member';
                                            else if (isMatched) className += ' matched-member';
                                            return `<div class="${className}">${isCurrentMember ? '👤 ' : ''}${member}</div>`;
                                        }).join('')}
                                    </div>
                                </div>
                                <div class="team ${otherTeam === 'バジル・ターメリック' ? 'team-basil-turmeric' : 'team-paprika-rosemary'}">
                                    <div class="team-name">🔴 ${otherTeam}（対戦チーム）</div>
                                    <div class="team-members">
                                        ${otherTeamMembers.map(member => {
                                            const isMatched = member.toLowerCase().replace(/\s+/g, '').includes(searchQuery.toLowerCase().replace(/\s+/g, ''));
                                            const className = isMatched ? 'member matched-member' : 'member';
                                            return `<div class="${className}">${member}</div>`;
                                        }).join('')}
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                html += '</div>';
            });
            
            resultsDiv.innerHTML = html;
        }
        
        // Enterキーで検索
        document.getElementById('nameInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchParticipant();
            }
        });

        // 二郎モード関連の変数
        let jiroTapCount = 0;
        let jiroImages = [];
        let jiroAnimationFrames = [];

        // 二郎モードを開始
        function activateJiroMode() {
            const overlay = document.getElementById('jiro-overlay');
            
            overlay.style.display = 'block';
            jiroTapCount = 0;
            
            // 2秒後に二郎さんの画像を生成開始
            setTimeout(() => {
                createJiroImages();
            }, 2000);
        }

        // 二郎さんの画像を複数作成
        function createJiroImages() {
            const overlay = document.getElementById('jiro-overlay');
            const imageCount = 1; // 1つの二郎さん画像
            
            for (let i = 0; i < imageCount; i++) {
                const img = document.createElement('img');
                img.src = 'https://github.com/Rhizobium-gits/HSports/blob/main/Mr.Jiro.jpg?raw=true';
                img.className = 'jiro-image';
                img.style.left = Math.random() * (window.innerWidth - 100) + 'px';
                img.style.top = Math.random() * (window.innerHeight - 150) + 'px';
                
                // タップイベント
                img.addEventListener('click', handleJiroTap);
                img.addEventListener('touchstart', handleJiroTap);
                
                overlay.appendChild(img);
                jiroImages.push(img);
                
                // 動きを開始
                animateJiroImage(img);
            }
        }

        // 二郎さん画像のアニメーション
        function animateJiroImage(img) {
            let x = parseFloat(img.style.left);
            let y = parseFloat(img.style.top);
            let vx = (Math.random() - 0.5) * 12; // より速い動き
            let vy = (Math.random() - 0.5) * 12; // より速い動き
            
            function move() {
                x += vx;
                y += vy;
                
                // 画面端での反射
                if (x <= 0 || x >= window.innerWidth - 100) {
                    vx = -vx;
                    x = Math.max(0, Math.min(window.innerWidth - 100, x));
                }
                if (y <= 0 || y >= window.innerHeight - 150) {
                    vy = -vy;
                    y = Math.max(0, Math.min(window.innerHeight - 150, y));
                }
                
                img.style.left = x + 'px';
                img.style.top = y + 'px';
                
                const frameId = requestAnimationFrame(move);
                jiroAnimationFrames.push(frameId);
            }
            
            move();
        }

        // 二郎さんタップ処理
        function handleJiroTap(e) {
            e.preventDefault();
            jiroTapCount++;
            
            // タップエフェクト
            e.target.classList.add('tap-effect');
            setTimeout(() => {
                e.target.classList.remove('tap-effect');
            }, 300);
            
            // 5回タップされたらリンクに飛ばす
            if (jiroTapCount >= 5) {
    // モバイル対応のリンク処理
    try {
        // まずwindow.openを試す
        const newWindow = window.open('https://tsubasato.weebly.com', '_blank');
        
        // window.openがブロックされた場合の代替処理
        if (!newWindow || newWindow.closed || typeof newWindow.closed == 'undefined') {
            // location.hrefで同じタブで開く
            window.location.href = 'https://tsubasato.weebly.com';
        }
    } catch (error) {
        // エラーが発生した場合も同じタブで開く
        window.location.href = 'https://tsubasato.weebly.com';
    }
    closeJiroMode();
}
        }

        // 二郎モードを終了
        function closeJiroMode() {
            const overlay = document.getElementById('jiro-overlay');
            
            // アニメーションを停止
            jiroAnimationFrames.forEach(frameId => {
                cancelAnimationFrame(frameId);
            });
            jiroAnimationFrames = [];
            
            // 画像を削除
            jiroImages.forEach(img => {
                img.remove();
            });
            jiroImages = [];
            
            // オーバーレイを非表示
            overlay.style.display = 'none';
            
            // 検索欄をクリア
            document.getElementById('nameInput').value = '';
        }

        // ESCキーで二郎モードを終了
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && document.getElementById('jiro-overlay').style.display === 'block') {
                closeJiroMode();
            }
        });

        // 画面リサイズ時の処理
        window.addEventListener('resize', function() {
            if (jiroImages.length > 0) {
                jiroImages.forEach(img => {
                    const x = parseFloat(img.style.left);
                    const y = parseFloat(img.style.top);
                    img.style.left = Math.min(x, window.innerWidth - 100) + 'px';
                    img.style.top = Math.min(y, window.innerHeight - 150) + 'px';
                });
            }
        });

            // グリッチ化する文字列（文字化けテキスト）
    const glitchMessage = `Survivability and life support in sealed mini-ecosystems with simulated planetary soils
Tsubasa Sato, Ko Abe, Jun Koseki, Mayumi Seto, Jun Yokoyama, Tomohiro Akashi, Masahiro Terada, Kohmei Kadowaki, 
Satoshi Yoshida, Yosuke Alexandre Yamashiki & Teppei Shimamura
Establishing a sustainable life-support system for space exploration is a formidable challenge due to
the vast distances, high costs, and environmental differences from Earth. Building upon the lessons
from the Biosphere 2 experiment, we introduce the novel “Ecosphere” and “Biosealed” systems, self-
sustaining ecosystems within customizable, enclosed containers. These systems incorporate terrestrial
ecosystems and groundwater layers, offering a potential model for transplanting Earth-like biomes
to extraterrestrial environments. Over 4 years, we conducted rigorous experiments and analyses
to understand the dynamics of these enclosed ecosystems. We successfully mitigated moisture
deficiency, a major obstacle to plant growth, by incorporating groundwater layers. Additionally, we
quantified microbial communities proliferating in specific soils, including simulated lunar and Ryugu
asteroid regolith, enhance plant cultivation in space environments. Metagenomic analysis of these
simulated space soils revealed diverse microbial populations and their crucial role in plant growth and
ecosystem stability. Notably, we identified symbiotic relationships between plants and Cyanobacteria,
enhancing oxygen production, and demonstrated the potential of LED lighting as an alternative
light source for plant cultivation in sun-limited space missions. We also confirmed the survival of
fruit flies within these systems, relying on plant-produced oxygen and photosynthetic bacteria. Our
research provides a comprehensive framework for developing future space life-support systems. The
novelty of our work lies in the unique design of our enclosed ecosystems, incorporating groundwater
layers and simulated extraterrestrial soils, and the detailed analysis of microbial communities within
these systems. These findings offer valuable insights into the challenges and potential solutions for
establishing sustainable human habitats in space, including the importance of microbial management
and potential health concerns related to microbial exposure.
tensions. These challenges underscore the need for refined, smaller-scale ecosystem transfer concepts for
sustainable space colonization and highlight the difficulties in maintaining long-term ecological balance.
In this study, we address these challenges by introducing the novel “Ecosphere” and “Biosealed” systems,
compact, natural, closed-loop ecosystems designed to replicate Earth’s ecosystems within customizable
containers. Our research focuses on plant growth and survival, the role of microorganisms, and cultivation
using simulated extraterrestrial soil. We aim to elucidate the mechanisms and challenges of sustaining life in
a closed environment and to identify potential solutions (Fig. 1b, right panel). Notably, our study investigates
plant cultivation in simulated extraterrestrial soils from the Luna and Ryugu asteroid, exploring the presence
and impact of microorganisms4–7. This approach is crucial for understanding the feasibility of growing plants in
extraterrestrial environments, a critical step towards human space colonization8.
Bringing components of natural systems together with humans is an indispensable and important item for
space migration to different celestial bodies, especially for a longer-term migration. Since the whole terrestrial
ecosystem cannot be transported to another planet, a systematic comprehension of each ecosystem component,
such as microbe colonies in different cultures with appropriate humidity conditions, should be made to establish
the mini-(core)biomes necessary for space migration, rather than comprehension of individual species9,10.
This study aims to identify essential ecosystem components which can be used as non-physio-chemical
life-supporting systems for supporting life in space by cultivating a minimum set of ecosystems. 
Our researchgoes beyond replicating previous closed-system experiments. We introduce novel design elements, such as
incorporating groundwater layers to address moisture deficiency, a common challenge in enclosed environments.
Additionally, we employ metagenomic analysis to quantify and characterize microbial communities in both our
custom ecosystems and simulated space soils. This comprehensive approach allows us to gain deeper insights into
the complex interactions between plants, microbes, and their environment, paving the way for the development
of more robust and sustainable life-support systems for future space exploration.
Natural circulation in a sealed space by Ecosphere 1
Inspired by Biosphere 2, we developed a sealed container named “Ecosphere 1”, with enhanced airtightness.
This container is made of glass and is sealed with melted rubber or silicone for the lid. It is designed to be more
compact than its predecessors, aiming to identify challenges in a basic closed ecological system by emulating a
natural environment.
To investigate the characteristics of natural circulation in the closed space of Ecosphere 1, we enclosed
nutrient-rich soil collected from a natural environment, and seeds of clover, a leguminous plant with nodules,
into the Ecosphere 1. As a result, mainly clover growth was observed. Emphasizing the role of microbes in
maintaining a stable natural ecosystem, experiments were conducted using soil containing naturally derived
microbes. Finally, Ecosphere 1 was placed outdoors on a wooden board at a height of about 1 m above the
ground to avoid heat from asphalt and concrete. The natural cycles inside it were then observed for 4 years,
reflecting the seasonal changes in Japan.
Our analysis revealed the coexistence of plants and Cyanobacteria, establishing diurnal oxygen supply and
natural circulation through their activity. We also observed the decomposition process of withered clover
stems and leaves. Mass conservation tests further confirmed the absence of flaws in the Ecosphere 1 structure
(Supplementary Fig. 1a, b, Tables 1, 2). These results suggest the viability of sustaining a unique ecosystem in a
confined space and underscore the integrity of the Ecosphere 1 design.
Remarkably, Ecosphere 1 adapted to the diverse external environment of Japan’s four seasons, exhibiting its
own natural cycles (Fig. 2a). In the first spring, only soil, water, and seeds were introduced into Ecosphere 1,
and it was placed in a sunny location. Within 2–3 days, the clover seeds germinated. As summer approached
and internal temperatures rose, most plants inhabiting the surface perished due to the heat retention of the
sealed glass container. However, decomposers breaking down the dead plants were identified (Supplementary
Fig. 2a). Furthermore, Cyanobacteria proliferated, covering both the surface and the ground (Fig. 2b). Their
photosynthesis likely provided oxygen, possibly sustaining aerobic bacteria (Supplementary Fig. 2 b,c). In
autumn, new shoots emerged from presumed rhizomes beneath the soil, while Cyanobacteria receded into the
earth (Fig. 2c). Though winter witnessed some plants perishing at the end of their life cycles, others overwintered.
Cyanobacteria flourished once more, enveloping the container surface (Fig. 2d). By the following spring, it
became evident that new shoots sprouted from seeds left behind by the previous generation (Fig. 2e).
Growth rate of plants in a sealed environment
To closely examine the influence of a sealed environment on the growth rate of plants, observations were made
within the Ecosphere 1 from January 13, 2021, to April 25, 2021, spanning approximately 15 weeks (Fig. 3a). In
the sealed space, plants grew only about 10 cm over 15 weeks, whereas in an open environment, they achieved
this growth in merely 5 weeks. This stunted growth is believed to be due to the accumulation of the plant hormone
ethylene and a lack of essential moisture for plant growth11. It is speculated that the buildup of the plant hormone
in the closed environment adversely impacted plant development. Additionally, given the characteristics of the
Ecosphere, the total water content remained constant. As plants grew, the soil moisture content diminished,
which was thought to further inhibit growth.
Drawing inspiration from these insights, we revamped Ecosphere 1 and birthed “Ecosphere 2”, endowed
with an expansive underground aquifer (Supplementary Fig. 3). Thanks to this new structure, the soil within
Ecosphere 2 remained consistently moist regardless of seasonal changes or the growth status of the plants (See
Supplementary materials 2 for the consideration of the quantities of water in the experiment). Within Ecosphere
2, while plants stretched taller, their leaf dimensions remained steadfast, possibly under the influence of the
ethylene hormone.
Importance of the presence of a groundwater layer
This study clarified the important role that groundwater layers play in maintaining closed ecosystems. The presence
of a groundwater layer in a closed system enabled a stable water supply to plants and acted as a buffer against
external temperature fluctuations, greatly improving the chances of plant survival. Notably, this experiment
resolved the issue of differences in plant growth, particularly height, between open and closed systems, which
had been an issue in previous studies using Ecosphere1. In closed systems with a properly designed groundwater
layer, plants were observed to grow in total length equal to or greater than those in open systems. On the other
hand, a new interesting phenomenon was also confirmed. In closed systems, regardless of the presence or absence
of a groundwater layer, the elongation of plant leaves tended to be suppressed compared to open systems. This
phenomenon unique to closed systems may be caused by factors that have yet to be elucidated, such as humidity
and carbon dioxide concentration within the system. These findings provide important insights into the design
of sustainable closed ecosystems and future plant cultivation in space. Future research will focus on elucidating
the leaf growth suppression mechanism unique to closed systems and will continue to work toward realizing a
more complete closed ecosystem.
During the experimental period, in S100-1, S100-2, S200-1, and S200-2, which do not have a groundwater
layer, the white clover inside reached its peak 3 and 6 days after the start of the experiment, and eventually
all the individuals died (Figs. 4, 5a). On the other hand, in S400-1, S400-2, S600-1, and S600-2, which have a 
groundwater layer, several individuals were still surviving after 15 days. In S400-2, all the germinated seeds
survived to the end (Figs. 4, 5a). However, in S600-1 and S600-2, which had the maximum amount of water from
the groundwater layer, the soil was too wet, causing root rot, making it difficult for some individuals to survive.
The samples in which white clover survived until the end were S400-1, S400-2, S600-1, S600-2, S1, S2, and
S3. Here, S400-1 and S400-2, which have the same amount of groundwater, were collectively referred to as closed
environment 400 (ce-400), S600-1 and S600-2 were collectively referred to as closed environment 600 (ce-600),
and the open systems S1, S2, and S3 were collectively referred to as non-closed environment (nce) to compare
the measurement results.
These results show that in a closed ecosystem with a groundwater layer, white clover can grow to a length
like that of an open system. In the ce-400 system, growth was better than in the open system, despite the same
sunshine conditions (Figs. 5b, 6b). However, the leaf length of the closed systems ce-400 and ce-600 tended to be
relatively smaller than that of the open system (Supplementary Table 4).
These experimental results show that the presence of a groundwater layer is essential for the long-term
survival of white clover in a closed system, and that an appropriate amount of moisture (ce-400) produces the
best growth results, while excessive moisture (ce-600) causes root rot. In particular, a properly designed closed
system (ce-400) can achieve length growth equal to or greater than that of an open system (nce). However, while
the closed system shows good length growth, the leaf length tends to be smaller than that of the open system.
These findings provide important insights into the design of sustainable closed ecosystems, emphasizing the
importance of a groundwater layer and the need for appropriate moisture management.
Plant cultivation in a sealed environment using LED lighting
During outdoor maintenance of Ecosphere1, many plants succumbed to the intense summer heat. In
extraterrestrial environments, such as the moon, there is no thick atmosphere like on Earth. Consequently, 
theheat from sunlight is directly transferred, compounded by intense radiation. In response, we experimented with
plant cultivation using the SP312 LED light (NARRNA), which has less heat impact than natural sunlight. We
chose basil (Ocimum basilicum) and cabbage (Brassica oleracea var.capitata) for the study, given their resistance
to diseases and pests, and their low sunlight requirements and cold tolerance.
Initially, to verify the suitability of the LED lights for plant growth, we conducted germination and growth
experiments with basil in open conditions, and with cabbage in enclosed environments (Fig. 3b, top panel). By
day 15, the cabbage germinated normally, and the basil growth was progressing well (Fig. 3b, bottom panel). 
Anobservation of cabbage germination in an open environment, without soil, confirmed its normal germination by
day 15 (Supplementary Fig. 4).
Building on these results, we attempted plant cultivation in a closed space. We planted clover and cabbage
simultaneously, monitoring their growth under the LED lights. Both plants were able to sustain life. However, a
characteristic challenge in enclosed spaces was observed: the tendency for leaves to be smaller. Nevertheless, this
tendency was also observed in natural sunlight conditions. Thus, we decided that using LED lights wouldn’t pose
issues for the plant growth experiments.
Observations on sustaining life in sealed environments
In the preliminary stages of our experiment with Ecosphere1, a dead fly was discovered 1 month after the
experiment’s inception. However, no other fly remains were detected thereafter. Based on this initial test, we
introduced an advanced model, “Biosealed”, incorporating clover, cabbage, and artificially added Cyanobacteria.
Biosealed, made of glass, doesn’t feature an underground aquifer; instead, it uses soil enriched with vermiculite
to enhance moisture retention.
To this Biosealed model, we introduced eggs of the fruit fly (Drosophila melanogaster), assessing life
sustenance potential under conditions similar to the previous experiment. Thanks to a consistently maintained
temperature in a stable environment, larvae were identified within a week. Under these conditions, the fruit
fly eggs hatched and matured into adults. Notably, the last observation of a living fruit fly was on day 37 post-
introduction. Considering that the average lifespan of a fruit fly in natural conditions (At an average temperature
of 27 ℃) is known to be 40 days, we can infer that life sustenance in the enclosed environment was a success
(Fig. 3c). We speculate that the extended life span could be attributed to the more stable conditions than those
found in nature.
From the above findings, it is evident that life can be sustained in enclosed environments for a definite period.
Plant cultivation in exoplanetary simulated soils
In this study, we examined the variations in plant cultivation environments within sealed spaces using multiple
extraterrestrial simulated soils. Notably, in the microbe-free Ryugu simulated soil, germination of plants was not
observed (Fig. 7a). Given that the aqueous pH value of the relevant simulated soil stood at 8.45, we ruled out
pH levels as the inhibiting factor for germination. Observations of darkened clover seeds and the presence of
fine particles in the Ryugu simulated soil led us to postulate that these particles might have adhered to the clover
seeds, potentially inhibiting their respiration.
Contrastingly, in the microbe-introduced Ryugu simulated soil, 6 out of 10 seeds successfully germinated
(Fig. 7a). This suggests the potential of microbes to ameliorate the extreme conditions of the Ryugu simulated
soil, laying the groundwork for further analysis. In the lunar simulated soil, irrespective of the presence of
microbes, all seeds germinated. These results have been consolidated in Fig. 7a.
In both Fly ash and Clinker ash, germination and growth of clover were confirmed regardless of microbial
presence (Fig. 7b). However, Fly ash, owing to its fine particles, exhibited heightened water repellency, posing a
constraint to plant growth. Building upon prior research which reported difficulties in microbe fixation to soil12,
efforts to increase the porosity of Fly ash and Clinker ash were undertaken. Initially, Fly ash mixed with water
was found to be fragile and had issues with excessive water absorption, rendering it unsuitable (Supplementary
Fig. 5e). In contrast, solids made from cement and bentonite were porous but lacked adequate moisture retention,
showing no signs of plant germination. Using a bonding agent, Booncrete exhibited moderate water absorption
(Supplementary Fig. 5 h, j, k), yet its excessive hardness was deemed unsuitable for plant cultivation, indicating
room for improvement.
To evaluate the extent to which microbes contribute to forming a plant cultivation environment in sealed
spaces, a comparative experiment between sterilized and non-sterilized soils was conducted. Consequently,
non-sterilized soils showed favorable growth of clover (Fig. 7c), whereas growth in sterilized soils was minimal
(Fig. 7d). These findings underscore the significance of microbial presence in improving conditions within
extreme and sealed environments.
Plant growth and microbial interactions in sealed environments
To elucidate the interactions between plant growth and microbes, we conducted a metagenomic analysis. Initially,
the relative abundance of microbes was depicted in Fig. 6a using entropy (alternatively known as ASV-based
Shannon diversity), a measure commonly utilized to indicate biological diversity and distribution. Ecosphere
samples (ES1, ES2) displayed lower entropy compared to other samples, suggesting a pronounced presence of
specific bacteria within the ecosphere. However, the time elapsed post-microbial introduction into the Indicator
soil’s simulated soil was shorter than for ES1 and ES2, suggesting we might be observing a transitional state
of microbial communities. Indicator soil is primarily composed of heterotrophic microbes. In the case of
endogenous heterotrophic succession, it’s proposed that an intermediate supply of all limiting resources and a
peak diversity in the organic carbon pool may occur13.
We employed BALSAMICO (BAyesian Latent Semantic Analysis of MIcrobial COmmunities)14 to identify
bacterial communities from microbiome data and to explore the association between environmental factors
and these communities. BALSAMICO integrates a non-negative matrix factorization approach, factoring in
environmental influences to model community structures. As illustrated in Fig. 8b, the analysis reveals that
while bacterial community 1 predominantly characterizes ES1, ES2 is mainly defined by bacterial community 2,
and the simulated soil is dominated by bacterial community 3. Intriguingly, the significant difference in bacterial
communities between ES1 and ES2 suggests that humidity might have a profound impact on the bacterial
community composition. Water activity is a known determinant of microbial communities11,15, which might
play a more significant role than other environmental factors in distinguishing ES1 and ES2.
Delving deeper into the bacterial communities, Community 1, as evident from data analysis in Fig. 6d and 8c
and Supplementary Table 2, is primarily dominated by aerobic chemoautotrophic bacteria such as Brevibacillus
from the phylum Firmicutes. Notably, the presence of oxygenic photosynthetic nitrogen-fixing bacteria, like
Leptolyngbya from the phylum Cyanobacteria, is suggested. In Community 1, not only plants but also these
bacteria might play a role in supplying both oxygen and organic compounds within the Ecosphere. In contrast,
Communities 2 and 3 have fewer oxygenic photosynthetic bacteria. Community 2 mainly consists of aerobic
chemoautotrophic bacteria such as Rhodothermaceae from the phylum Bacteroidetes and Trueperaceae from
the phylum Thermi, as well as anaerobic chemoautotrophic bacteria like Anaerolineae from the phylum
Chloroflexi. Notably, Acidimicrobiales from the phylum Actinobacteria suggest a potential role in supporting
organic compound provision through autotrophic iron ion oxidation. Additionally, Comamonadaceae from the
phylum Proteobacteria is a notably abundant species. Finally, Community 3 is primarily composed of aerobic
chemoautotrophic bacteria like Arthrobacter, Nocardioidaceae, and Agromyces from the phylum Actinobacteria.
Especially, Arthrobacter has been reported to survive under stressful conditions16,17.
Conclusion
In our research, we crafted innovative enclosures dubbed “Ecosphere” and “Biosealed” to delve into the creation
and upkeep of compact, naturally sustainable ecosystems within confined spaces. Our experiments furnished
pivotal insights relevant to life support systems in space exploration:
Natural circulation in sealed habitats We discerned the symbiotic synergy between plants and Cyanobacteria
in the Ecosphere, which facilitate oxygen generation during daylight. This interdependence is integral to life
preservation in sealed settings. Additionally, leveraging LED lighting augments plant growth, even sans sun-
light—a revelation with profound implications for space missions with limited solar access.
Decoding growth dynamics: We observed that a diminished plant growth rate correlated with ethylene gas
buildup and moisture deficits. To address these challenges, an Ecosphere blueprint featuring a subterranean
water reservoir has been proposed to ensure consistent moisture availability. Furthermore, variations in leaf
dimensions, modulated by plant hormones, emerged as morphological feature indicative of metabolic func-tion. 
Since water is used to form new plant tissues, there is a possibility of water shortage occurring. Therefore,
in Ecosphere2, we created an underground water layer to resolve the water shortage issue.
Navigating planetary soil terrains: Under severe soil conditions, the incorporation of microorganisms seems
promising in enhancing seed sprouting. This underscores the merit of microbial symbiosis as a viable strategy
for life support in inhospitable extraterrestrial conditions. The soil’s intrinsic properties, such as granular size,
hydrophobicity, and cohesiveness, significantly impact plant development. Recognizing these factors is vital
in refining life support system architectures.
Microbial dynamics in extraterrestrial soils: Understanding microbial populations thriving in simulated alien
soils is essential, as it could foreshadow potential pathogen proliferation during extraterrestrial colonization.
Given the pivotal link between gut microbiome and factors like healthspan, this exploration is of utmost
importance.
While our study provided substantial insights, there are limitations to consider. Firstly, the “Ecosphere” and
“Biosealed” systems, despite emulating extraterrestrial conditions, were still influenced by Earth’s specific
gravitational and atmospheric conditions. This may not entirely encapsulate the challenges posed by actual space
environments. The dependence on LED lighting, while demonstrating potential, raises questions about energy
requirements and the feasibility of maintaining such systems during extended space voyages. Moreover, while we
have charted the behavior of specific microbial communities in our simulated environments, the full spectrum
of microbial interactions and potential risks in genuine extraterrestrial contexts remains uncertain. Collectively,
these findings provide a robust framework to enhance the design and functionality of life support systems in the
evolving realm of space exploration.
Materials and methods
Preparation of the ecosphere container
The Ecosphere utilized in this research was crafted from a sealed glass container. Plastic containers were not
chosen due to their vulnerability to heat, making them unsuitable for prolonged experiments. The lid of the
container was fortified with silicone and further sealed at the mouth with Parafilm for added protection.
Construction of Ecosphere1
Soil samples were taken from various locations in the Kumayama mountains in Okayama, Japan, and mixed
with soil where clover grew. Water collected from our immediate environment was used. The collected soil,
water, and plant seeds were placed in the glass container and sealed. No sterilization process was implemented.
This procedure, including the collection and use of plant materials, was conducted in strict compliance with
both domestic and international guidelines and legislation relevant to experimental research and plant material
collection.
Construction of Ecosphere2
Large grain Akadama soil (Supplementary Fig. 6b) was laid at the bottom of the container. Cultivated soil
(Supplementary Fig. 6a), leaf mold, chemical fertilizer with a nitrogen (N), phosphorus (P), and potassium (K)
ratio of 6:6:6, and soil from clover-growing regions were mixed and placed on top. Water from the surrounding
environment was poured over the Akadama soil, followed by the mixed soil. Clover seeds were then spread
over this layer and the container was sealed. The interior was composed of air, soil, and groundwater layers with
respective ratios of 13:5:4.
Construction of biosealed
The same cultivated soil, leaf mold, and fertilizer with a ratio of 6:6:6 N:P:K, as used in Ecosphere2, were
combined. To enhance moisture retention, zeolite (Supplementary Fig. 6c) and vermiculite (Supplementary
Fig. 6d) were added. Eggs of the yellow Drosophila fly, cabbage, and clover seeds were introduced, and the glass
container was sealed.
Creation of exoplanetary simulated soils
Lunar simulated soil
We employed a lunar simulated soil with the same composition as lunar regolith (provided by Hideaki Miyamoto,
Supplementary Fig. 6a). Refer to Supplementary Fig. 6 for the chemical composition.
Ryugu simulated soil
Ryugu Simulated Soil provided by Hideaki Miyamoto (Supplementary Fig. 6b) are possessing a similar
composition to Ryugu soil. Refer to reference 13 for more information18–21.
Lunar regolith simulated soil
Fly ash and Clinker ash, by-products from coal-fired power plants resembling lunar regolith properties, were
utilized (provided by Chugoku Electric Power Co.). For the chemical composition, see Supplementary Fig. 6 and
Supplementary Table 3.
Creation of porous fly ash using bentonite as a binder
Ten grams of Fly ash (produced by Chugoku Electric Power Co.—Misumi Power Plant) was mixed with 1 g
of bentonite (Kunigel V1 from Kunimine Industries). This mixture was kneaded with 5 mL of water and
molded. The firing process involved a gradual increase from room temperature to 900 °C over 1 h, maintaining
900 °C for 2 h, and then naturally cooling inside the furnace, as detailed in the time program (Koizumi et al.22,
Supplementary Fig. 6).
Methods of experimentation to demonstrate the importance of the existence of
groundwater layers
To investigate the importance of the groundwater, we conducted the experiment. Eight Ecospheres were created
using sun-dried soil and a container capable of storing 200 ml of water (Fig. 6a).
There were four types of ecospheres:
1. 2. 3. 4. S100-1, and S100-2: Samples containing 100 ml of water in the soil
S200-1, and S200-2: Samples containing 200 ml of water in the soil
S400-1, and S400-2: Samples containing 200 ml of water in the soil and 200 ml in the groundwater layer
(400 ml in total)
S600-1, and S600-2: Samples containing 200 ml of water in the soil and 400 ml in the groundwater layer
(600 ml in total)
In addition, three open systems were also created for comparison.Five clover seeds were enclosed in each of the 11 samples,
and the samples were observed for 15 days. The
lids of the Ecospheres were fixed with caulking material. The lids were shifted so that the amount of sunlight
supplied to the open system was equal to that of the closed system. The containers used in the experiment were
250 ml glass bottles.
Metabolome measurement and analysis
DNA extraction from soil samples
Soil samples were lyophilized with VD-250R Freeze Dryer (TAITEC) and the lyophilized samples were smashed
with Multibeads Shocker (Yasui Kikai) at 1500 rpm for 2 min. Lysis Solution F (Nippon Gene) was added to
the smashed samples. After incubation for 10 min at 65 C, the samples were centrifuged at 12,000×g for 2 min.
The supernatants were mixed with Purification Solution (Nippon Gene) and chloroform, and centrifuged at
12,000×g for 15 min. DNAs of the supernatants were purified with MPure-12 system and MPure Bacterial DNA
Extraction Kit (MP Bio).
DNA extraction from water samples
Environmental DNA and cellular fragments were concentrated from water samples using Sterivex filters (Merck
Millipore, 0.22 μm). Post-filtration, Lysis Solution F (Nippon Gene) was added, and the samples were shaken at
1500 rpm for 2 min using the Shake Master Neo (bms). After a 10-min incubation at 65 °C, the samples were
centrifuged at 12,000×g for a minute, and the supernatant was collected. DNA was subsequently extracted using
the Lab-Aid 824 s DNA Extraction kit (ZEESAN).
Library creation and sequencing
The Synergy LX (Bio Tek) and QuantiFluor dsDNA System (Promega) were employed to measure the DNA
solution concentration. A library was prepared using the 2-step tailed PCR method. The Synergy H1 (Bio Tek)
and QuantiFluor dsDNA System were then utilized to measure the library concentration, while the Fragment
Analyzer and dsDNA 915 Reagent Kit (Agilent Technologies) confirmed the library’s quality. Sequencing was
executed using the MiSeq system and MiSeq Reagent Kit v3 (Illumina) with a 2 × 300 bp setup.
16S rRNA data analysis
Using the FASTX-Toolkit (ver. 0.0.14), reads that matched the used primer sequences were isolated. Primer
sequences in the extracted reads were removed, and the sequences were processed using various bioinformatics
tools and plugins. Lineages were inferred by comparing the obtained representative sequences with the
Greengene (ver. 13_8) 97% OTU database. The phylogenetic tree was constructed using the Alignment and
phylogeny plugins. Supplementary Table 4 provides a correspondence between ASV IDs, read counts, and
estimated phylogenetic lineages for each sample.
Microbial community identification
During the preprocessing phase of the analysis, OTUs derived from eukaryotic organisms, specifically
“chloroplasts” and “mitochondria,” were removed from the dataset. Subsequently, we identified the bacterial
community and applied BALSAMICO (BAyesian Latent Semantic Analysis of MIcrobial COmmunities) to
investigate the association between the bacterial community and experimental conditions14. BALSAMICO
incorporates a non-negative matrix factorization approach that considers environmental factors, thereby
modeling community structure. The number of bacterial community clusters, L=3, was determined using ten-
fold cross-validation in BALSAMICO. Moreover, we designated “environmental condition” as the explanatory
variable in BALSAMICO, selected “Indicator-soil” as the baseline, and incorporated “ES1,” “ES2,” and “others.”
Data availability
Data is provided within the manuscript or supplementary information files.`;

    // タイプライター風に1文字ずつ表示し、揺れをつける関数
    function typewriterLoop(text, element, speed) {
      let i = 0;
      element.textContent = '';

      function type() {
        if (i < text.length) {
          element.textContent += text.charAt(i);
          i++;
          setTimeout(type, speed);
        } else {
          // 表示完了したら少し待ってからクリアして繰り返す
          setTimeout(() => {
            element.textContent = '';
            i = 0;
            type();
          }, 1000);
        }
      }
      type();
    }

    // 10分後に黒背景グリッチ画面を表示＆タイトル変更
    setTimeout(() => {
      const screen = document.createElement('div');
      screen.id = 'glitch-screen';

      const textEl = document.createElement('pre');
      textEl.id = 'glitch-text';

      screen.appendChild(textEl);
      document.body.appendChild(screen);

      screen.style.display = 'block';

      // タイトルを変更
      document.title = "We will never forgive you";

      typewriterLoop(glitchMessage, textEl, 5);
    }, 600000);

    // 初回起動
    showLinks();
    changeTextsPeriodically();
        
    </script>
</body>
</html>
